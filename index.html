<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.svg">
    <title>MemoQuiz - Entrena tu Memoria</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Pantalla de Inicio -->
        <div id="start-screen" class="screen active">
            <!-- <header class="header">
                <h1 class="title">MemoQuiz</h1>
                <p class="subtitle">Entrena tu memoria escribiendo p√°rrafos completos</p>
            </header> -->

            <div class="input-section">
                <div class="paragraph-list">
                    <div class="paragraphs-header">
                        <h3>P√°rrafos guardados:</h3>
                        <div class="data-management-buttons">
                            <button id="export-data-btn" class="btn btn-secondary btn-small">
                                üì• Exportar Datos
                            </button>
                            <button id="import-data-btn" class="btn btn-secondary btn-small">
                                üì§ Importar Datos
                            </button>
                            <input type="file" id="import-file-input" accept=".json" style="display: none;">
                        </div>
                    </div>
                    <div id="saved-paragraphs" class="saved-paragraphs">
                        <!-- Los p√°rrafos guardados se mostrar√°n aqu√≠ -->
                    </div>
                </div>

                <div class="new-paragraph-section">
                    <h3>Agregar nuevo p√°rrafo:</h3>
                    <textarea
                        id="paragraph-input"
                        placeholder="Ingresa aqu√≠ el p√°rrafo que deseas memorizar..."
                        rows="6"
                        class="paragraph-input"
                    ></textarea>
                    <button id="add-paragraph-btn" class="btn btn-primary">
                        Agregar P√°rrafo <span class="keyboard-hint">(a)</span>
                    </button>
                </div>
            </div>

            <!-- <div class="instructions">
                <h3>¬øC√≥mo funciona?</h3>
                <ul>
                    <li>Agrega p√°rrafos que deseas memorizar</li>
                    <li>La aplicaci√≥n dividir√° el p√°rrafo en frases (terminadas en punto)</li>
                    <li>Estudia cada frase y escr√≠bela de memoria</li>
                    <li>Obt√©n un rango basado en tu rendimiento</li>
                </ul>
            </div> -->
        </div>

        <!-- Pantalla de Quiz -->
        <div id="quiz-screen" class="screen">
            <header class="quiz-header">
                <div class="progress-info">
                    <span id="current-sentence-num">Frase 1</span>
                    <span id="total-sentences" class="total-sentences">de X</span>
                </div>
                <div id="timer-display" class="timer-display">
                    ‚è±Ô∏è <span id="timer-value">00:00</span>
                </div>
                <button id="quit-quiz-btn" class="btn btn-secondary">
                    Abandonar <span class="keyboard-hint">(a)</span>
                </button>
            </header>

            <div class="quiz-content">
                <div id="study-section" class="study-section">
                    <div class="sentence-display">
                        <h2 id="current-sentence-text" class="sentence-text"></h2>
                    </div>
                    <button id="ready-btn" class="btn btn-primary">
                        Estoy listo para escribir <span class="keyboard-hint">(Enter)</span>
                    </button>
                </div>

                <div id="writing-section" class="writing-section hidden">
                    <div class="writing-prompt">
                    </div>
                    <textarea
                        id="user-input"
                        class="user-input"
                        placeholder="Escribe aqu√≠ la frase que acabas de estudiar..."
                        rows="4"
                    ></textarea>
                    <div class="writing-buttons">
                        <button id="show-sentence-btn" class="btn btn-secondary">
                            Ver frase nuevamente <span class="keyboard-hint">(v)</span>
                        </button>
                        <button id="submit-sentence-btn" class="btn btn-primary">
                            Enviar frase <span class="keyboard-hint">(Ctrl+Enter)</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pantalla de Resultados -->
        <div id="results-screen" class="screen">
            <!-- <header class="results-header">
                <h1 class="results-title">¬°P√°rrafo Completado!</h1>
            </header> -->

            <div class="results-content">
                <div class="rank-section">
                    <h2 id="final-rank" class="rank-display"></h2>
                    <p id="rank-description" class="rank-description"></p>
                </div>

                <div class="detailed-results">
                    <h3>Resumen por frase:</h3>
                    <div id="sentence-results" class="sentence-results">
                        <!-- Los resultados por frase se mostrar√°n aqu√≠ -->
                    </div>
                </div>

                <div class="total-attempts">
                    <p>Total de revisiones: <span id="total-attempts-count">0</span></p>
                </div>

                <div class="results-buttons">
                    <button id="try-again-btn" class="btn btn-primary">
                        Intentar de nuevo <span class="keyboard-hint">(i)</span>
                    </button>
                    <button id="back-to-start-btn" class="btn btn-secondary">
                        Volver al inicio <span class="keyboard-hint">(v)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para errores de frase -->
    <div id="error-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚ùå Frase Incorrecta</h3>
            </div>
            <div class="modal-body">
                <p class="modal-message">La frase que escribiste no es correcta. Elige c√≥mo continuar:</p>
                <div class="modal-options">
                    <button id="review-sentence-btn" class="btn btn-primary modal-btn">
                        üîÑ Ver frase y estudiar nuevamente <span class="keyboard-hint">(v)</span>
                    </button>
                    <button id="try-again-modal-btn" class="btn btn-secondary modal-btn">
                        ‚úçÔ∏è Intentar escribir sin ver la frase correcta<span class="keyboard-hint">(i)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para historial de resultados -->
    <div id="history-modal" class="modal-overlay hidden">
        <div class="modal-content modal-history">
            <div class="modal-header">
                <h3 class="modal-title">üìä Historial de Intentos</h3>
                <button id="close-history-modal" class="close-modal-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="history-content" class="history-content">
                    <!-- El historial se cargar√° aqu√≠ din√°micamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para abandonar quiz -->
    <div id="quit-confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚ö†Ô∏è Abandonar Quiz</h3>
            </div>
            <div class="modal-body">
                <p class="modal-message">¬øEst√°s seguro de que quieres abandonar el quiz? Se perder√° todo el progreso.</p>
                <div class="modal-options">
                    <button id="confirm-quit-btn" class="btn btn-primary modal-btn">
                        S√≠, abandonar <span class="keyboard-hint">(s)</span>
                    </button>
                    <button id="cancel-quit-btn" class="btn btn-secondary modal-btn">
                        No, continuar <span class="keyboard-hint">(n)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para eliminar p√°rrafo -->
    <div id="delete-confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚ö†Ô∏è Eliminar P√°rrafo</h3>
            </div>
            <div class="modal-body">
                <p class="modal-message">¬øEst√°s seguro de que quieres eliminar este p√°rrafo? Tambi√©n se eliminar√°n todos sus resultados.</p>
                <div class="modal-options">
                    <button id="confirm-delete-btn" class="btn btn-primary modal-btn">
                        S√≠, eliminar <span class="keyboard-hint">(s)</span>
                    </button>
                    <button id="cancel-delete-btn" class="btn btn-secondary modal-btn">
                        No, cancelar <span class="keyboard-hint">(n)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para limpiar historial -->
    <div id="clear-history-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üóëÔ∏è Limpiar Historial</h3>
            </div>
            <div class="modal-body">
                <p class="modal-message">¬øEst√°s seguro de que quieres limpiar todo el historial de este p√°rrafo? Esta acci√≥n no se puede deshacer.</p>
                <div class="modal-options">
                    <button id="confirm-clear-history-btn" class="btn btn-primary modal-btn">
                        S√≠, limpiar <span class="keyboard-hint">(s)</span>
                    </button>
                    <button id="cancel-clear-history-btn" class="btn btn-secondary modal-btn">
                        No, cancelar <span class="keyboard-hint">(n)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n para importar datos -->
    <div id="import-confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚ö†Ô∏è Importar Datos</h3>
            </div>
            <div class="modal-body">
                <p class="modal-message">
                    Se han detectado <strong id="import-paragraphs-count">0</strong> p√°rrafos y 
                    <strong id="import-results-count">0</strong> resultados en el archivo.
                </p>
                <p class="modal-warning">
                    ‚ö†Ô∏è <strong>ADVERTENCIA:</strong> Al importar estos datos, se perder√°n todos tus p√°rrafos 
                    y resultados actuales. Esta acci√≥n no se puede deshacer.
                </p>
                <div class="modal-options">
                    <button id="confirm-import-btn" class="btn btn-primary modal-btn">
                        S√≠, importar <span class="keyboard-hint">(s)</span>
                    </button>
                    <button id="cancel-import-btn" class="btn btn-secondary modal-btn">
                        No, cancelar <span class="keyboard-hint">(n)</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
